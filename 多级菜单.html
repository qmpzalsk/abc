<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<style>
			#list li ul{
				display: none;
			}
		</style>
	</head>
	<body>
		<ul id='list'>
			<!--<li>
				<h2>第一级</h2>
				<ul>
					<li>						
						<h2>第二级</h2>
						<ul>
							<li>
								<h2>第三级</h2>
							</li>
							<li>
								<h2>第三级</h2>
								<ul>
									<li>
										<h2>第四级</h2>
									</li>
								</ul>
							</li>
						</ul>
					</li>
					<li>
						<h2>第二级</h2>
						<ul>
							<li>
								<h2>第三级</h2>
								<ul>
									<li>
										<h2>第四级</h2>
									</li>
									<li>
										<h2>第四级</h2>
									</li>
								</ul>
							</li>
							<li>
								<h2>第三级</h2>
								<ul>
									<li>
										<h2>第四级</h2>
									</li>
								</ul>
							</li>
							<li>
								<h2>第三级</h2>
							</li>
						</ul>
					</li>
				</ul>
			</li>-->
		</ul>
		<script>
			var list = document.getElementById('list');
			var data = [
				{
					name:'第一级',
					child:[
						{
							name:'第二级',
							child:[
								{
									name:'第三级',
									child:[]
								},
								{
									name:'第三级',
									child:[
										{
											name:'第四级',
											child:[]
										}
									]
								}
							]
						},
						{
							name:'第二级',
							child:[
								{
									name:'第三级',
									child:[
										{
											name:'第四级',
											child:[]
										},
										{
											name:'第四级',
											child:[]
										}
									]
								},
								{
									name:'第三级',
									child:[
										{
											name:'第四级',
											child:[]
										}
									]
								},
								{
									name:'第三级',
									child:[]
								}
							]
						}
					]
				},
				{
					name:'第一级',
					child:[
						{
							name:'第二级',
							child:[]
						},
						{
							name:'第二级',
							child:[
								{
									name:'第三级',
									child:[
										{
											name:'第四级',
											child:[]
										}
									]
								},
								{
									name:'第三级',
									child:[
										{
											name:'第四级',
											child:[]
										}
									]
								},
								{
									name:'第三级',
									child:[
										{
											name:'第四级',
											child:[]
										}
									]
								}
							]
						},
						{
							name:'第二级',
							child:[
								{
									name:'第三级',
									child:[]
								},
								{
									name:'第三级',
									child:[
										{
											name:'第四级',
											child:[]
										},
										{
											name:'第四级',
											child:[]
										}
									]
								},
								{
									name:'第三级',
									child:[
										{
											name:'第四级',
											child:[]
										}
									]
								}
							]
						}
					]
				},
				{
					name:'第一级',
					child:[
						{
							name:'第二级',
							child:[
								{
									name:'第三级',
									child:[
										{
											name:'第四级',
											child:[]
										}
									]
								},
								{
									name:'第三级',
									child:[
										{
											name:'第四级',
											child:[]
										}
									]
								}
							]
						},
						{
							name:'第二级',
							child:[
								{
									name:'第三级',
									child:[
										{
											name:'第四级',
											child:[]
										}
									]
								},
								{
									name:'第三级',
									child:[]
								},
								{
									name:'第三级',
									child:[
										{
											name:'第四级',
											child:[]
										},
										{
											name:'第四级',
											child:[]
										}
									]
								}
							]
						}
					]
				}
			]
			function fn(arr){
				var str = '';
				arr.forEach(function(a){
					if(a.child.length){
						str += '<li>'+
							'<h2>'+a.name+'</h2>'+
							'<ul>'+fn(a.child)+'</ul>'+
							'</li>';
					}else{
						str += '<li>'+
							'<h2>'+a.name+'</h2>'+
							'</li>';
					}
				})
				return str;
			}
			list.innerHTML = fn(data);
			for(var j=0;j<list.children.length;j++){
				var h2s = list.children[j].getElementsByTagName('h2');
				for(var i=0;i<h2s.length;i++){
					h2s[i].index = i;
					h2s[i].onOff = true;
					h2s[i].onclick = function(){
						if(this.onOff){
							if(this.nextElementSibling){
								this.nextElementSibling.style.display = 'block';
								this.onOff = false;
							}
						}else{
							this.nextElementSibling.style.display = 'none';
							this.onOff = true;
						}
					}
				}
			}
		</script>
	</body>
</html>
